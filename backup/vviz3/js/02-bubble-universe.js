var simulation;
var bubbleInit = function () {
  function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }
  var width = $(".bubbles").first().width();
  var height = $(".bubbles").first().height();
  var currentYear = 2004;
  var scrollHeight = 2320;

  $("#instructions--bubble").click(function () {
    $("#instructions--bubble").hide();
  });

  function setYear(year) {
    currentYear = year;
    $("#year").text(currentYear.toString().substring(2, 4));
    $(".year-button").removeClass("active");
    $(".year-button .year-button__text:contains('" + year + "')")
      .parent()
      .addClass("active");
    $(".year-label").removeClass("active");
    $(".year-label:contains('" + year + "')").addClass("active");
  }

  $(".year-button").off();

  var t;
  var tooltip = d3.select(".tooltip");
  var showTooltip = function (d) {
    tooltip.transition().duration(200);
    tooltip
      .style("opacity", 1)
      .html(d.name + "<br/>" + numberWithCommas(d.size) + " searches")
      .style("top", d.y + "px");

    tooltip.style("left", function () {
      if (d.x > width / 2) {
        return d.x - tooltip.nodes()[0].getClientRects()[0].width + "px";
      }
      return d.x + "px";
    });
  };

  var hideTooltip = function (d) {
    tooltip.style("opacity", 0);
  };

  t = d3.transition().duration(750);
  var currentData;
  var size = d3
    .scaleSqrt()
    .domain([0, 1563600])
    .range([3, Math.sqrt(height * width) / 4]);
  var graph;
  function getYearData(alphabet, year) {
    var d1 = alphabet.sort((a, b) => b["Sum"] - a["Sum"]);
    if (width > 1024) {
      d1 = d1.slice(0, 40);
    } else {
      d1 = d1.slice(0, 20);
    }

    var d2 = [];

    d1.forEach(function (d) {
      if (d.Category == "Shave") {
        ccolor = "url(#grad1)";
      }
      if (d.Category == "Grooming") {
        ccolor = "url(#grad2)";
      }
      if (d.Category == "Beard") {
        ccolor = "url(#grad3)";
      }
      if (d.Category == "Hair removal") {
        ccolor = "url(#grad4)";
      }
      d2.push({ name: d.Keyword, size: d[year], color: ccolor });
    });
    return d2;
  }
  var nodePadding = 2.5;

  d3.selectAll(".bubbles-svg").remove();

  var svg = d3
    .select(".bubbles")
    .append("svg")
    .attr("class", "bubbles-svg")
    .attr("width", width)
    .attr("height", height);

  var linGrad = svg
    .append("linearGradient")
    .attr("id", "grad1")
    .attr("x1", "0%")
    .attr("x2", "0%")
    .attr("y1", "0%")
    .attr("y2", "100%");
  linGrad
    .append("stop")
    .attr("offset", "0%")
    .style("stop-color", "#0542d8")
    .style("stop-opacity", "1");
  linGrad
    .append("stop")
    .attr("offset", "100%")
    .style("stop-color", "#3d06b4")
    .style("stop-opacity", "1");

  linGrad = svg
    .append("linearGradient")
    .attr("id", "grad2")
    .attr("x1", "0%")
    .attr("x2", "0%")
    .attr("y1", "0%")
    .attr("y2", "100%");
  linGrad
    .append("stop")
    .attr("offset", "0%")
    .style("stop-color", "#ff59ae")
    .style("stop-opacity", "1");
  linGrad
    .append("stop")
    .attr("offset", "100%")
    .style("stop-color", "#d6006d")
    .style("stop-opacity", "1");

  linGrad = svg
    .append("linearGradient")
    .attr("id", "grad3")
    .attr("x1", "0%")
    .attr("x2", "0%")
    .attr("y1", "0%")
    .attr("y2", "100%");
  linGrad
    .append("stop")
    .attr("offset", "0%")
    .style("stop-color", "#12d0e1")
    .style("stop-opacity", "1");
  linGrad
    .append("stop")
    .attr("offset", "100%")
    .style("stop-color", "#2b8bf8")
    .style("stop-opacity", "1");

  linGrad = svg
    .append("linearGradient")
    .attr("id", "grad4")
    .attr("x1", "0%")
    .attr("x2", "0%")
    .attr("y1", "0%")
    .attr("y2", "100%");
  linGrad
    .append("stop")
    .attr("offset", "0%")
    .style("stop-color", "#ffc718")
    .style("stop-opacity", "1");
  linGrad
    .append("stop")
    .attr("offset", "100%")
    .style("stop-color", "#e58100")
    .style("stop-opacity", "1");

  simulation = d3
    .forceSimulation()
    .force(
      "forceX",
      d3
        .forceX()
        .strength(80 / width)
        .x(width * 0.5)
    )
    .force(
      "forceY",
      d3
        .forceY()
        .strength(80 / height)
        .y(height * 0.5)
    )

    .force(
      "collide",
      d3
        .forceCollide()
        .strength(0.5)
        .radius(function (d) {
          sizeFactor = 1;
          //if (currentYear < 2016) sizeFactor = 0.7;
          return size(d.size) * sizeFactor + nodePadding;
        })
        .iterations(1)
    );

  var data = [
    {
      2004: 1,
      2005: 0,
      2006: 174400,
      2007: 117300,
      2008: 107800,
      2009: 608900,
      2010: 726300,
      2011: 837200,
      2012: 1094100,
      2013: 1068700,
      2014: 1100500,
      2015: 1554000,
      2016: 796200,
      2017: 716600,
      2018: 948300,
      2019: 967000,
      2020: 1563600,
      Keyword: "manscaping",
      Category: "Grooming",
      Sum: 13008900
    },
    {
      2004: 1,
      2005: 0,
      2006: 17800,
      2007: 29500,
      2008: 12400,
      2009: 27500,
      2010: 27100,
      2011: 28020,
      2012: 28880,
      2013: 55760,
      2014: 85600,
      2015: 88000,
      2016: 81800,
      2017: 73900,
      2018: 86000,
      2019: 79900,
      2020: 91000,
      Keyword: "beard styles",
      Category: "Beard",
      Sum: 862560
    },
    {
      2004: 1,
      2005: 21400,
      2006: 0,
      2007: 4300,
      2008: 10300,
      2009: 3600,
      2010: 10200,
      2011: 19000,
      2012: 16000,
      2013: 19460,
      2014: 20740,
      2015: 13120,
      2016: 2520,
      2017: 9040,
      2018: 10100,
      2019: 31020,
      2020: 70300,
      Keyword: "manscape",
      Category: "Grooming",
      Sum: 303600
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 60600,
      2008: 63000,
      2009: 88800,
      2010: 41700,
      2011: 68400,
      2012: 100800,
      2013: 96000,
      2014: 45600,
      2015: 39000,
      2016: 45600,
      2017: 34200,
      2018: 47700,
      2019: 49500,
      2020: 55200,
      Keyword: "shaving for men",
      Category: "Shave",
      Sum: 855600
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 7700,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 6500,
      2013: 21100,
      2014: 25800,
      2015: 33200,
      2016: 52800,
      2017: 50900,
      2018: 44400,
      2019: 54500,
      2020: 45400,
      Keyword: "patchy beard",
      Category: "Beard",
      Sum: 357600
    },
    {
      2004: 1,
      2005: 23800,
      2006: 0,
      2007: 20000,
      2008: 9300,
      2009: 7400,
      2010: 6400,
      2011: 18800,
      2012: 23800,
      2013: 32000,
      2014: 52500,
      2015: 32500,
      2016: 34300,
      2017: 27700,
      2018: 42700,
      2019: 38700,
      2020: 38300,
      Keyword: "goatee beard",
      Category: "Beard",
      Sum: 423600
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 9500,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 6100,
      2013: 7600,
      2014: 9800,
      2015: 20300,
      2016: 20400,
      2017: 29100,
      2018: 25900,
      2019: 28800,
      2020: 25200,
      Keyword: "short beard styles",
      Category: "Beard",
      Sum: 190700
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 8300,
      2011: 4300,
      2012: 3300,
      2013: 2600,
      2014: 7800,
      2015: 11400,
      2016: 5000,
      2017: 11200,
      2018: 6600,
      2019: 16300,
      2020: 22540,
      Keyword: "how to get rid of razor bumps",
      Category: "Shave",
      Sum: 110040
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 4900,
      2009: 0,
      2010: 0,
      2011: 8700,
      2012: 4100,
      2013: 2200,
      2014: 12200,
      2015: 1980,
      2016: 4080,
      2017: 9820,
      2018: 8350,
      2019: 14190,
      2020: 19930,
      Keyword: "amish beard",
      Category: "Beard",
      Sum: 94010
    },
    {
      2004: 1,
      2005: 0,
      2006: 11000,
      2007: 5200,
      2008: 17200,
      2009: 14800,
      2010: 19000,
      2011: 23800,
      2012: 33200,
      2013: 42900,
      2014: 35200,
      2015: 20890,
      2016: 21070,
      2017: 27260,
      2018: 22260,
      2019: 14000,
      2020: 19520,
      Keyword: "hair removal cream for men",
      Category: "Hair removal",
      Sum: 332730
    },
    {
      2004: 1,
      2005: 1800,
      2006: 1980,
      2007: 1470,
      2008: 0,
      2009: 1820,
      2010: 1220,
      2011: 2060,
      2012: 2480,
      2013: 5040,
      2014: 7730,
      2015: 11000,
      2016: 8590,
      2017: 9980,
      2018: 12900,
      2019: 14180,
      2020: 18250,
      Keyword: "beard growth",
      Category: "Beard",
      Sum: 108230
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 810,
      2013: 3330,
      2014: 1930,
      2015: 8270,
      2016: 4210,
      2017: 7210,
      2018: 7840,
      2019: 4100,
      2020: 12110,
      Keyword: "best beard trimmer australia",
      Category: "Beard",
      Sum: 56990
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 1200,
      2012: 2790,
      2013: 0,
      2014: 0,
      2015: 8330,
      2016: 2010,
      2017: 1220,
      2018: 630,
      2019: 1730,
      2020: 11520,
      Keyword: "manscaper",
      Category: "Grooming",
      Sum: 35480
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 14100,
      2011: 4900,
      2012: 8800,
      2013: 6800,
      2014: 4900,
      2015: 7600,
      2016: 9400,
      2017: 8400,
      2018: 12400,
      2019: 10400,
      2020: 10700,
      Keyword: "van dyke beard",
      Category: "Beard",
      Sum: 112800
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 5000,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 5800,
      2013: 0,
      2014: 0,
      2015: 6800,
      2016: 5800,
      2017: 6300,
      2018: 7050,
      2019: 5600,
      2020: 10450,
      Keyword: "beard shapes",
      Category: "Beard",
      Sum: 54900
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 990,
      2010: 1730,
      2011: 1110,
      2012: 3040,
      2013: 3170,
      2014: 4340,
      2015: 4000,
      2016: 4530,
      2017: 6830,
      2018: 6330,
      2019: 7850,
      2020: 9180,
      Keyword: "mens trimmer",
      Category: "Grooming",
      Sum: 57900
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 2500,
      2008: 0,
      2009: 0,
      2010: 1600,
      2011: 0,
      2012: 760,
      2013: 580,
      2014: 1210,
      2015: 3420,
      2016: 2260,
      2017: 4510,
      2018: 4950,
      2019: 5610,
      2020: 9010,
      Keyword: "mens beard trimmer",
      Category: "Beard",
      Sum: 37850
    },
    {
      2004: 1,
      2005: 0,
      2006: 20000,
      2007: 14300,
      2008: 26100,
      2009: 22700,
      2010: 21300,
      2011: 19700,
      2012: 34400,
      2013: 15640,
      2014: 21440,
      2015: 21360,
      2016: 15960,
      2017: 7240,
      2018: 14360,
      2019: 10420,
      2020: 8820,
      Keyword: "facial hair styles",
      Category: "Grooming",
      Sum: 278320
    },
    {
      2004: 1,
      2005: 0,
      2006: 3300,
      2007: 6800,
      2008: 3000,
      2009: 3600,
      2010: 4600,
      2011: 5840,
      2012: 7520,
      2013: 10110,
      2014: 10910,
      2015: 16070,
      2016: 12340,
      2017: 12360,
      2018: 11020,
      2019: 9810,
      2020: 6800,
      Keyword: "growing a beard",
      Category: "Beard",
      Sum: 126280
    },
    {
      2004: 1,
      2005: 14700,
      2006: 0,
      2007: 6500,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 1600,
      2012: 0,
      2013: 2000,
      2014: 5100,
      2015: 8780,
      2016: 5680,
      2017: 880,
      2018: 4960,
      2019: 3220,
      2020: 6230,
      Keyword: "long beard styles",
      Category: "Beard",
      Sum: 61410
    },
    {
      2004: 1,
      2005: 0,
      2006: 410,
      2007: 600,
      2008: 1250,
      2009: 1050,
      2010: 1210,
      2011: 1450,
      2012: 1520,
      2013: 3183,
      2014: 5230,
      2015: 5200,
      2016: 5820,
      2017: 4610,
      2018: 5150,
      2019: 5140,
      2020: 6100,
      Keyword: "long beard",
      Category: "Beard",
      Sum: 51233
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 570,
      2008: 460,
      2009: 1250,
      2010: 0,
      2011: 370,
      2012: 900,
      2013: 1650,
      2014: 3990,
      2015: 4800,
      2016: 4780,
      2017: 3990,
      2018: 4600,
      2019: 5590,
      2020: 5769,
      Keyword: "beard grooming",
      Category: "Beard",
      Sum: 41489
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 4500,
      2011: 11700,
      2012: 0,
      2013: 8400,
      2014: 4400,
      2015: 4400,
      2016: 4200,
      2017: 11000,
      2018: 6300,
      2019: 3600,
      2020: 5600,
      Keyword: "beard styles for men",
      Category: "Beard",
      Sum: 71600
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 2380,
      2013: 3030,
      2014: 530,
      2015: 1080,
      2016: 1120,
      2017: 3000,
      2018: 2470,
      2019: 3260,
      2020: 5080,
      Keyword: "best trimmer for men",
      Category: "Hair removal",
      Sum: 24820
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 1400,
      2008: 0,
      2009: 0,
      2010: 2900,
      2011: 920,
      2012: 2490,
      2013: 4510,
      2014: 4830,
      2015: 4980,
      2016: 5200,
      2017: 3870,
      2018: 3230,
      2019: 3920,
      2020: 4830,
      Keyword: "how to shave beard",
      Category: "Shave",
      Sum: 44420
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 830,
      2012: 650,
      2013: 1230,
      2014: 1000,
      2015: 1870,
      2016: 2490,
      2017: 3520,
      2018: 2220,
      2019: 2330,
      2020: 4410,
      Keyword: "beard clippers",
      Category: "Beard",
      Sum: 23400
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 3000,
      2009: 2300,
      2010: 2100,
      2011: 0,
      2012: 0,
      2013: 1390,
      2014: 0,
      2015: 2510,
      2016: 0,
      2017: 560,
      2018: 530,
      2019: 3690,
      2020: 3770,
      Keyword: "mutton chops beard",
      Category: "Beard",
      Sum: 21540
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 630,
      2009: 0,
      2010: 420,
      2011: 900,
      2012: 1060,
      2013: 1250,
      2014: 1690,
      2015: 3110,
      2016: 2610,
      2017: 2040,
      2018: 2750,
      2019: 2320,
      2020: 3530,
      Keyword: "blonde beard",
      Category: "Beard",
      Sum: 23660
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 670,
      2008: 0,
      2009: 0,
      2010: 1660,
      2011: 2010,
      2012: 2040,
      2013: 2300,
      2014: 3230,
      2015: 2570,
      2016: 3000,
      2017: 5110,
      2018: 3980,
      2019: 4380,
      2020: 3490,
      Keyword: "mustache beard",
      Category: "Beard",
      Sum: 36290
    },
    {
      2004: 1,
      2005: 1400,
      2006: 0,
      2007: 0,
      2008: 1700,
      2009: 1800,
      2010: 1420,
      2011: 1500,
      2012: 1550,
      2013: 2180,
      2014: 3220,
      2015: 3310,
      2016: 4290,
      2017: 2830,
      2018: 2870,
      2019: 3560,
      2020: 3311,
      Keyword: "full beard",
      Category: "Beard",
      Sum: 37151
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 580,
      2010: 0,
      2011: 270,
      2012: 1080,
      2013: 870,
      2014: 1920,
      2015: 920,
      2016: 1250,
      2017: 2310,
      2018: 1220,
      2019: 2660,
      2020: 3300,
      Keyword: "face trimmer",
      Category: "Grooming",
      Sum: 18270
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 1900,
      2010: 0,
      2011: 1000,
      2012: 1600,
      2013: 2770,
      2014: 2600,
      2015: 1150,
      2016: 1150,
      2017: 2910,
      2018: 2570,
      2019: 4480,
      2020: 3220,
      Keyword: "chin strap beard",
      Category: "Beard",
      Sum: 28450
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 1000,
      2008: 0,
      2009: 0,
      2010: 1170,
      2011: 350,
      2012: 770,
      2013: 1090,
      2014: 2140,
      2015: 780,
      2016: 1370,
      2017: 1900,
      2018: 2140,
      2019: 2530,
      2020: 3010,
      Keyword: "clean beard",
      Category: "Beard",
      Sum: 19310
    },
    {
      2004: 1,
      2005: 2300,
      2006: 660,
      2007: 890,
      2008: 3650,
      2009: 2310,
      2010: 2920,
      2011: 4300,
      2012: 2570,
      2013: 3060,
      2014: 4820,
      2015: 3832,
      2016: 3468,
      2017: 3662,
      2018: 3260,
      2019: 3671,
      2020: 2905,
      Keyword: "facial hair growth",
      Category: "Grooming",
      Sum: 50002
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 1300,
      2009: 2400,
      2010: 2870,
      2011: 520,
      2012: 1440,
      2013: 3390,
      2014: 2740,
      2015: 1940,
      2016: 3480,
      2017: 3860,
      2018: 4510,
      2019: 2660,
      2020: 2670,
      Keyword: "male laser hair removal",
      Category: "Hair removal",
      Sum: 36550
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 0,
      2013: 1790,
      2014: 840,
      2015: 1110,
      2016: 4190,
      2017: 2460,
      2018: 1040,
      2019: 2270,
      2020: 2660,
      Keyword: "tom hardy beard",
      Category: "Beard",
      Sum: 17340
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 430,
      2008: 1180,
      2009: 930,
      2010: 0,
      2011: 850,
      2012: 1020,
      2013: 1377,
      2014: 1460,
      2015: 1325,
      2016: 2641,
      2017: 2008,
      2018: 2014,
      2019: 2207,
      2020: 2601,
      Keyword: "chin beard",
      Category: "Beard",
      Sum: 21634
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 1300,
      2010: 0,
      2011: 2450,
      2012: 1980,
      2013: 2460,
      2014: 3310,
      2015: 790,
      2016: 2630,
      2017: 2170,
      2018: 3330,
      2019: 2230,
      2020: 2600,
      Keyword: "mustache and beard",
      Category: "Beard",
      Sum: 26220
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 1150,
      2011: 660,
      2012: 570,
      2013: 1350,
      2014: 870,
      2015: 1170,
      2016: 2790,
      2017: 2970,
      2018: 2290,
      2019: 1360,
      2020: 2570,
      Keyword: "vacuum beard trimmer",
      Category: "Beard",
      Sum: 18440
    },
    {
      2004: 1,
      2005: 4340,
      2006: 840,
      2007: 810,
      2008: 2480,
      2009: 590,
      2010: 3030,
      2011: 2320,
      2012: 2870,
      2013: 3500,
      2014: 2624,
      2015: 3484,
      2016: 2422,
      2017: 2720,
      2018: 2280,
      2019: 3150,
      2020: 2440,
      Keyword: "back hair removal",
      Category: "Hair removal",
      Sum: 41924
    },
    {
      2004: 1,
      2005: 1400,
      2006: 0,
      2007: 1160,
      2008: 540,
      2009: 430,
      2010: 370,
      2011: 1090,
      2012: 1380,
      2013: 1860,
      2014: 3040,
      2015: 1880,
      2016: 1980,
      2017: 1600,
      2018: 2470,
      2019: 2250,
      2020: 2208,
      Keyword: "beard goatee",
      Category: "Beard",
      Sum: 24548
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 720,
      2011: 0,
      2012: 930,
      2013: 2200,
      2014: 820,
      2015: 2230,
      2016: 1960,
      2017: 2540,
      2018: 1320,
      2019: 1250,
      2020: 1920,
      Keyword: "long hair and beard",
      Category: "Beard",
      Sum: 17170
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 570,
      2008: 0,
      2009: 0,
      2010: 1500,
      2011: 220,
      2012: 840,
      2013: 140,
      2014: 510,
      2015: 760,
      2016: 730,
      2017: 940,
      2018: 1400,
      2019: 810,
      2020: 1849,
      Keyword: "shaving trimmer",
      Category: "Shave",
      Sum: 11449
    },
    {
      2004: 1,
      2005: 560,
      2006: 370,
      2007: 240,
      2008: 1080,
      2009: 920,
      2010: 740,
      2011: 1254,
      2012: 1371,
      2013: 1287,
      2014: 963,
      2015: 938,
      2016: 980,
      2017: 725,
      2018: 750,
      2019: 935,
      2020: 1818,
      Keyword: "how to shave head",
      Category: "Shave",
      Sum: 15296
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 600,
      2008: 0,
      2009: 390,
      2010: 330,
      2011: 980,
      2012: 480,
      2013: 1030,
      2014: 1490,
      2015: 690,
      2016: 1690,
      2017: 1650,
      2018: 1514,
      2019: 1242,
      2020: 1721,
      Keyword: "itchy beard",
      Category: "Beard",
      Sum: 15279
    },
    {
      2004: 1,
      2005: 0,
      2006: 1300,
      2007: 0,
      2008: 0,
      2009: 790,
      2010: 0,
      2011: 0,
      2012: 250,
      2013: 1550,
      2014: 2870,
      2015: 2300,
      2016: 2450,
      2017: 530,
      2018: 2340,
      2019: 1950,
      2020: 1650,
      Keyword: "thick beard",
      Category: "Beard",
      Sum: 18950
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 1000,
      2012: 1460,
      2013: 1320,
      2014: 1620,
      2015: 1500,
      2016: 1430,
      2017: 840,
      2018: 1820,
      2019: 630,
      2020: 1650,
      Keyword: "how to shave properly",
      Category: "Shave",
      Sum: 13410
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 660,
      2011: 780,
      2012: 680,
      2013: 1130,
      2014: 250,
      2015: 260,
      2016: 250,
      2017: 230,
      2018: 440,
      2019: 1010,
      2020: 1540,
      Keyword: "moustache growth",
      Category: "Grooming",
      Sum: 7440
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 800,
      2012: 1370,
      2013: 1170,
      2014: 1380,
      2015: 750,
      2016: 1770,
      2017: 1220,
      2018: 1120,
      2019: 650,
      2020: 1530,
      Keyword: "goatee beard styles",
      Category: "Beard",
      Sum: 12430
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 1200,
      2009: 0,
      2010: 910,
      2011: 510,
      2012: 1200,
      2013: 1970,
      2014: 1310,
      2015: 630,
      2016: 1540,
      2017: 880,
      2018: 1610,
      2019: 770,
      2020: 1430,
      Keyword: "to manscape",
      Category: "Grooming",
      Sum: 14730
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 0,
      2013: 810,
      2014: 2140,
      2015: 2200,
      2016: 1210,
      2017: 1840,
      2018: 1500,
      2019: 2070,
      2020: 1380,
      Keyword: "long hair with beard",
      Category: "Beard",
      Sum: 14210
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 660,
      2012: 540,
      2013: 1730,
      2014: 5050,
      2015: 7290,
      2016: 6120,
      2017: 3870,
      2018: 2930,
      2019: 1800,
      2020: 1370,
      Keyword: "hipster beard",
      Category: "Beard",
      Sum: 32010
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 890,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 1460,
      2012: 790,
      2013: 1080,
      2014: 3080,
      2015: 1400,
      2016: 1790,
      2017: 2440,
      2018: 1240,
      2019: 680,
      2020: 1320,
      Keyword: "good beards",
      Category: "Beard",
      Sum: 16530
    },
    {
      2004: 1,
      2005: 880,
      2006: 0,
      2007: 0,
      2008: 1410,
      2009: 530,
      2010: 240,
      2011: 870,
      2012: 1440,
      2013: 1366,
      2014: 879,
      2015: 651,
      2016: 562,
      2017: 1062,
      2018: 878,
      2019: 690,
      2020: 1260,
      Keyword: "how to shave your head",
      Category: "Shave",
      Sum: 13298
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 300,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 220,
      2012: 272,
      2013: 367,
      2014: 292,
      2015: 487,
      2016: 523,
      2017: 626,
      2018: 646,
      2019: 824,
      2020: 1202,
      Keyword: "light beard",
      Category: "Beard",
      Sum: 6271
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 0,
      2013: 280,
      2014: 1610,
      2015: 1940,
      2016: 720,
      2017: 1350,
      2018: 210,
      2019: 1850,
      2020: 1130,
      Keyword: "best beard styles",
      Category: "Beard",
      Sum: 9300
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 310,
      2011: 330,
      2012: 400,
      2013: 680,
      2014: 390,
      2015: 608,
      2016: 294,
      2017: 1000,
      2018: 710,
      2019: 666,
      2020: 1037,
      Keyword: "electric beard trimmer",
      Category: "Beard",
      Sum: 6941
    },
    {
      2004: 1,
      2005: 2300,
      2006: 2300,
      2007: 2310,
      2008: 2030,
      2009: 2700,
      2010: 1920,
      2011: 1550,
      2012: 2450,
      2013: 2460,
      2014: 1670,
      2015: 3530,
      2016: 1340,
      2017: 2260,
      2018: 2100,
      2019: 1980,
      2020: 920,
      Keyword: "men pubes",
      Category: "Grooming",
      Sum: 34100
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 280,
      2009: 0,
      2010: 0,
      2011: 110,
      2012: 369,
      2013: 284,
      2014: 131,
      2015: 200,
      2016: 312,
      2017: 664,
      2018: 447,
      2019: 686,
      2020: 911,
      Keyword: "medium beard",
      Category: "Beard",
      Sum: 4729
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 230,
      2011: 140,
      2012: 0,
      2013: 345,
      2014: 431,
      2015: 150,
      2016: 676,
      2017: 1010,
      2018: 617,
      2019: 773,
      2020: 898,
      Keyword: "curly beard",
      Category: "Beard",
      Sum: 10211
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 280,
      2010: 0,
      2011: 130,
      2012: 220,
      2013: 0,
      2014: 173,
      2015: 557,
      2016: 649,
      2017: 77,
      2018: 531,
      2019: 838,
      2020: 866,
      Keyword: "hair and beard trimmer",
      Category: "Beard",
      Sum: 4609
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 6700,
      2008: 0,
      2009: 1300,
      2010: 1800,
      2011: 1500,
      2012: 2380,
      2013: 1680,
      2014: 2040,
      2015: 3100,
      2016: 1500,
      2017: 1420,
      2018: 1580,
      2019: 2280,
      2020: 860,
      Keyword: "beard designs",
      Category: "Beard",
      Sum: 28400
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 0,
      2013: 0,
      2014: 0,
      2015: 6520,
      2016: 4910,
      2017: 6050,
      2018: 3400,
      2019: 3220,
      2020: 850,
      Keyword: "beard glitter",
      Category: "Beard",
      Sum: 24950
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 0,
      2013: 180,
      2014: 0,
      2015: 0,
      2016: 330,
      2017: 140,
      2018: 140,
      2019: 270,
      2020: 820,
      Keyword: "patchy beard growth",
      Category: "Beard",
      Sum: 2160
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 1000,
      2009: 0,
      2010: 650,
      2011: 410,
      2012: 300,
      2013: 1320,
      2014: 950,
      2015: 710,
      2016: 710,
      2017: 910,
      2018: 630,
      2019: 820,
      2020: 810,
      Keyword: "george clooney beard",
      Category: "Beard",
      Sum: 14840
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 510,
      2009: 1310,
      2010: 650,
      2011: 680,
      2012: 320,
      2013: 1250,
      2014: 540,
      2015: 990,
      2016: 1310,
      2017: 660,
      2018: 650,
      2019: 1226,
      2020: 780,
      Keyword: "how to get rid of shaving bumps",
      Category: "Shave",
      Sum: 11506
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 410,
      2013: 340,
      2014: 1260,
      2015: 1130,
      2016: 970,
      2017: 460,
      2018: 710,
      2019: 410,
      2020: 750,
      Keyword: "beard scissors",
      Category: "Beard",
      Sum: 6870
    },
    {
      2004: 1,
      2005: 2400,
      2006: 0,
      2007: 0,
      2008: 870,
      2009: 0,
      2010: 630,
      2011: 1770,
      2012: 530,
      2013: 1250,
      2014: 1230,
      2015: 1200,
      2016: 950,
      2017: 1250,
      2018: 850,
      2019: 1110,
      2020: 740,
      Keyword: "asian facial hair",
      Category: "Grooming",
      Sum: 14950
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 570,
      2011: 0,
      2012: 0,
      2013: 480,
      2014: 0,
      2015: 0,
      2016: 630,
      2017: 790,
      2018: 570,
      2019: 180,
      2020: 640,
      Keyword: "beard jewellery",
      Category: "Beard",
      Sum: 3860
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 410,
      2011: 120,
      2012: 0,
      2013: 231,
      2014: 900,
      2015: 467,
      2016: 604,
      2017: 62,
      2018: 471,
      2019: 457,
      2020: 463,
      Keyword: "beard maintenance",
      Category: "Beard",
      Sum: 8479
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 720,
      2010: 300,
      2011: 0,
      2012: 470,
      2013: 0,
      2014: 610,
      2015: 570,
      2016: 220,
      2017: 430,
      2018: 300,
      2019: 274,
      2020: 411,
      Keyword: "david beckham beard",
      Category: "Beard",
      Sum: 4515
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 0,
      2013: 220,
      2014: 0,
      2015: 96,
      2016: 0,
      2017: 90,
      2018: 174,
      2019: 579,
      2020: 406,
      Keyword: "beard hair straightener",
      Category: "Beard",
      Sum: 1825
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 140,
      2010: 240,
      2011: 454,
      2012: 839,
      2013: 292,
      2014: 369,
      2015: 418,
      2016: 507,
      2017: 870,
      2018: 376,
      2019: 704,
      2020: 374,
      Keyword: "stubble beard trimmer",
      Category: "Beard",
      Sum: 6212
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 2190,
      2012: 580,
      2013: 2450,
      2014: 4920,
      2015: 870,
      2016: 450,
      2017: 1610,
      2018: 3980,
      2019: 1460,
      2020: 330,
      Keyword: "wolverine beard",
      Category: "Beard",
      Sum: 19230
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 0,
      2013: 450,
      2014: 440,
      2015: 1240,
      2016: 210,
      2017: 930,
      2018: 180,
      2019: 190,
      2020: 290,
      Keyword: "heavy stubble",
      Category: "Grooming",
      Sum: 4100
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 0,
      2012: 160,
      2013: 280,
      2014: 150,
      2015: 250,
      2016: 370,
      2017: 0,
      2018: 0,
      2019: 220,
      2020: 281,
      Keyword: "harry styles beard",
      Category: "Beard",
      Sum: 4741
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 0,
      2011: 500,
      2012: 0,
      2013: 0,
      2014: 580,
      2015: 0,
      2016: 0,
      2017: 270,
      2018: 500,
      2019: 240,
      2020: 250,
      Keyword: "buzz cut with beard",
      Category: "Beard",
      Sum: 3070
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 360,
      2011: 710,
      2012: 360,
      2013: 750,
      2014: 440,
      2015: 950,
      2016: 940,
      2017: 1500,
      2018: 490,
      2019: 460,
      2020: 220,
      Keyword: "best stubble trimmer",
      Category: "Grooming",
      Sum: 7410
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 186,
      2009: 178,
      2010: 371,
      2011: 41,
      2012: 101,
      2013: 26,
      2014: 129,
      2015: 97,
      2016: 48,
      2017: 178,
      2018: 0,
      2019: 40,
      2020: 37,
      Keyword: "brad pitt beard",
      Category: "Beard",
      Sum: 9532
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 100,
      2009: 0,
      2010: 0,
      2011: 79,
      2012: 0,
      2013: 54,
      2014: 56,
      2015: 50,
      2016: 0,
      2017: 69,
      2018: 68,
      2019: 43,
      2020: 17,
      Keyword: "how to shave pubes men",
      Category: "Shave",
      Sum: 536
    },
    {
      2004: 8900,
      2005: 0,
      2006: 2900,
      2007: 1920,
      2008: 7840,
      2009: 7700,
      2010: 23410,
      2011: 10830,
      2012: 12110,
      2013: 19170,
      2014: 25630,
      2015: 24000,
      2016: 18990,
      2017: 23360,
      2018: 23800,
      2019: 18560,
      2020: 24460,
      Keyword: "beard man",
      Category: "Beard",
      Sum: 259760
    },
    {
      2004: 4200,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 1560,
      2010: 2690,
      2011: 2140,
      2012: 3550,
      2013: 3030,
      2014: 2260,
      2015: 4590,
      2016: 4960,
      2017: 5420,
      2018: 7030,
      2019: 5400,
      2020: 8890,
      Keyword: "grey beard",
      Category: "Beard",
      Sum: 58370
    },
    {
      2004: 5300,
      2005: 1500,
      2006: 2910,
      2007: 590,
      2008: 940,
      2009: 2790,
      2010: 2320,
      2011: 2920,
      2012: 2670,
      2013: 4940,
      2014: 7360,
      2015: 5190,
      2016: 7030,
      2017: 6153,
      2018: 5723,
      2019: 6590,
      2020: 8260,
      Keyword: "beard shave",
      Category: "Shave",
      Sum: 72866
    },
    {
      2004: 2390,
      2005: 660,
      2006: 1290,
      2007: 260,
      2008: 420,
      2009: 1230,
      2010: 1020,
      2011: 1282,
      2012: 1166,
      2013: 2174,
      2014: 3264,
      2015: 2279,
      2016: 3084,
      2017: 2721,
      2018: 2521,
      2019: 2904,
      2020: 3650,
      Keyword: "shave beard",
      Category: "Shave",
      Sum: 32134
    },
    {
      2004: 4900,
      2005: 2700,
      2006: 6300,
      2007: 4100,
      2008: 2960,
      2009: 5400,
      2010: 3630,
      2011: 4480,
      2012: 9530,
      2013: 7520,
      2014: 7920,
      2015: 5330,
      2016: 6820,
      2017: 7330,
      2018: 5770,
      2019: 7040,
      2020: 4600,
      Keyword: "mens hair removal",
      Category: "Hair removal",
      Sum: 100180
    },
    {
      2004: 1340,
      2005: 370,
      2006: 890,
      2007: 970,
      2008: 740,
      2009: 1480,
      2010: 1392,
      2011: 1521,
      2012: 1475,
      2013: 1205,
      2014: 1409,
      2015: 1493,
      2016: 1281,
      2017: 1124,
      2018: 1491,
      2019: 1714,
      2020: 1193,
      Keyword: "male grooming",
      Category: "Grooming",
      Sum: 21969
    },
    {
      2004: 2000,
      2005: 1980,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 660,
      2011: 400,
      2012: 1200,
      2013: 240,
      2014: 1020,
      2015: 1220,
      2016: 960,
      2017: 600,
      2018: 1280,
      2019: 980,
      2020: 1760,
      Keyword: "how to shave face",
      Category: "Shave",
      Sum: 13500
    },
    {
      2004: 50200,
      2005: 20800,
      2006: 9300,
      2007: 28800,
      2008: 5600,
      2009: 47700,
      2010: 20700,
      2011: 9300,
      2012: 29900,
      2013: 43100,
      2014: 39700,
      2015: 48700,
      2016: 62500,
      2017: 46400,
      2018: 37800,
      2019: 41800,
      2020: 42000,
      Keyword: "mens shaving",
      Category: "Shave",
      Sum: 601200
    },
    {
      2004: 25000,
      2005: 22300,
      2006: 19000,
      2007: 14800,
      2008: 5300,
      2009: 12000,
      2010: 26600,
      2011: 26200,
      2012: 25300,
      2013: 32900,
      2014: 19700,
      2015: 27600,
      2016: 22800,
      2017: 20100,
      2018: 29800,
      2019: 24100,
      2020: 19900,
      Keyword: "laser hair removal men",
      Category: "Hair removal",
      Sum: 388200
    },
    {
      2004: 32500,
      2005: 28900,
      2006: 24800,
      2007: 19200,
      2008: 6800,
      2009: 15600,
      2010: 34600,
      2011: 33800,
      2012: 32600,
      2013: 42800,
      2014: 25500,
      2015: 35600,
      2016: 29300,
      2017: 25700,
      2018: 38300,
      2019: 31200,
      2020: 25600,
      Keyword: "men laser hair removal",
      Category: "Hair removal",
      Sum: 502000
    },
    {
      2004: 18000,
      2005: 12200,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 2300,
      2011: 3000,
      2012: 2700,
      2013: 0,
      2014: 4700,
      2015: 7000,
      2016: 3600,
      2017: 3240,
      2018: 5200,
      2019: 1440,
      2020: 12780,
      Keyword: "how to shave your face",
      Category: "Shave",
      Sum: 80620
    },
    {
      2004: 9600,
      2005: 0,
      2006: 0,
      2007: 2700,
      2008: 2200,
      2009: 4400,
      2010: 3100,
      2011: 3880,
      2012: 3800,
      2013: 11010,
      2014: 8390,
      2015: 13480,
      2016: 6580,
      2017: 8880,
      2018: 11700,
      2019: 10380,
      2020: 5220,
      Keyword: "how to get rid of shaving rash",
      Category: "Shave",
      Sum: 107340
    },
    {
      2004: 4600,
      2005: 3580,
      2006: 2000,
      2007: 1930,
      2008: 3890,
      2009: 2780,
      2010: 3060,
      2011: 4180,
      2012: 4020,
      2013: 5380,
      2014: 3000,
      2015: 2698,
      2016: 2520,
      2017: 2756,
      2018: 1796,
      2019: 2212,
      2020: 2154,
      Keyword: "men pubic hair",
      Category: "Grooming",
      Sum: 50620
    },
    {
      2004: 8400,
      2005: 5280,
      2006: 6090,
      2007: 3000,
      2008: 1660,
      2009: 6440,
      2010: 2990,
      2011: 4960,
      2012: 4026,
      2013: 4752,
      2014: 4150,
      2015: 3258,
      2016: 3058,
      2017: 3050,
      2018: 3804,
      2019: 2947,
      2020: 2767,
      Keyword: "pubic hair removal",
      Category: "Hair removal",
      Sum: 68189
    },
    {
      2004: 34200,
      2005: 11900,
      2006: 48800,
      2007: 13500,
      2008: 4100,
      2009: 25100,
      2010: 23500,
      2011: 28100,
      2012: 28100,
      2013: 24600,
      2014: 16190,
      2015: 19580,
      2016: 17150,
      2017: 18750,
      2018: 16790,
      2019: 9610,
      2020: 9960,
      Keyword: "waxing for men",
      Category: "Hair removal",
      Sum: 354910
    },
    {
      2004: 34700,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 15400,
      2009: 20200,
      2010: 17400,
      2011: 26000,
      2012: 14200,
      2013: 23500,
      2014: 20300,
      2015: 17600,
      2016: 26600,
      2017: 38520,
      2018: 20380,
      2019: 12360,
      2020: 9900,
      Keyword: "how to shave pubes",
      Category: "Shave",
      Sum: 298500
    },
    {
      2004: 21400,
      2005: 4100,
      2006: 5200,
      2007: 4200,
      2008: 13500,
      2009: 8200,
      2010: 12090,
      2011: 8920,
      2012: 10660,
      2013: 10310,
      2014: 12540,
      2015: 14470,
      2016: 7850,
      2017: 6940,
      2018: 7180,
      2019: 5190,
      2020: 6030,
      Keyword: "shave balls",
      Category: "Shave",
      Sum: 157310
    },
    {
      2004: 34500,
      2005: 8200,
      2006: 24500,
      2007: 17700,
      2008: 17800,
      2009: 19660,
      2010: 22370,
      2011: 21420,
      2012: 14370,
      2013: 22780,
      2014: 20570,
      2015: 23380,
      2016: 21780,
      2017: 16460,
      2018: 17410,
      2019: 18550,
      2020: 9670,
      Keyword: "male waxing",
      Category: "Hair removal",
      Sum: 321940
    },
    {
      2004: 26700,
      2005: 0,
      2006: 6600,
      2007: 8100,
      2008: 9000,
      2009: 5000,
      2010: 17600,
      2011: 15800,
      2012: 7200,
      2013: 11210,
      2014: 9720,
      2015: 17120,
      2016: 6700,
      2017: 5120,
      2018: 3810,
      2019: 9350,
      2020: 5360,
      Keyword: "how to shave balls",
      Category: "Shave",
      Sum: 169340
    },
    {
      2004: 4200,
      2005: 1200,
      2006: 0,
      2007: 400,
      2008: 1300,
      2009: 260,
      2010: 1130,
      2011: 660,
      2012: 936,
      2013: 1309,
      2014: 583,
      2015: 580,
      2016: 440,
      2017: 490,
      2018: 350,
      2019: 750,
      2020: 728,
      Keyword: "chest hair removal",
      Category: "Hair removal",
      Sum: 11466
    },
    {
      2004: 9000,
      2005: 0,
      2006: 4100,
      2007: 8100,
      2008: 2000,
      2009: 4300,
      2010: 5200,
      2011: 2340,
      2012: 3640,
      2013: 3780,
      2014: 4820,
      2015: 5800,
      2016: 6350,
      2017: 2340,
      2018: 1530,
      2019: 1980,
      2020: 990,
      Keyword: "how to shave your balls",
      Category: "Shave",
      Sum: 67710
    },
    {
      2004: 1,
      2005: 0,
      2006: 0,
      2007: 0,
      2008: 0,
      2009: 0,
      2010: 100,
      2011: 0,
      2012: 0,
      2013: 0,
      2014: 114,
      2015: 0,
      2016: 101,
      2017: 94,
      2018: 60,
      2019: 27,
      2020: 0,
      Keyword: "beard decorations",
      Category: "Beard",
      Sum: 14896
    }
  ];

  $(".year-button").click(function (e) {
    redraw(parseInt(e.target.innerText));
  });

  $(".year-arrow--forward").click(function (e) {
    if (currentYear < 2020) {
      redraw(currentYear + 1);
    }
  });

  $(".year-arrow--back").click(function (e) {
    if (currentYear > 2004) {
      redraw(currentYear - 1);
    }
  });
  function redraw(year) {
    setYear(year);
    currentData = getYearData(data, year);
    for (let index = 0; index < currentData.length; index++) {
      graph[index].size = currentData[index].size;
    }

    svg.selectAll("svg.textnode").style("display", function (d) {
      if (d.size <= 1) return "none";
      return "block";
    });

    svg
      .selectAll("svg.textnode")
      .select("text")
      .text(function (d) {
        return d.name;
      })
      .style("display", function (d) {
        return d.size > 2000 ? "block" : "none";
      })
      .call(wrap, function (d) {
        sizeFactor = 1;
        //if (currentYear < 2016) sizeFactor = 0.7;
        return size(d.size) * sizeFactor;
      });

    svg
      .selectAll("svg.textnode")
      .select("circle")
      .transition()
      .duration(500)
      .attr("r", function (d) {
        sizeFactor = 1;
        //if (currentYear < 2016) sizeFactor = 0.7;
        return size(d.size) * sizeFactor;
      });
    simulation.nodes(graph).on("tick", function (d) {
      textNodeSvg
        .attr("x", function (d) {
          return d.x;
        })
        .attr("y", function (d) {
          return d.y;
        });
    });
    simulation.alphaTarget(0.03).restart();
  }

  graph = getYearData(data, 2004);

  textNode = svg
    .append("g")
    .attr("class", "node")
    .selectAll("svg")
    .data(graph);

  textNodeSvg = textNode
    .enter()
    .append("svg")
    .attr("x", function (d) {
      d.x = width / 2;
      if (width >= height) {
        d.x = Math.random() * width;
      }
      return d.x;
    })
    .attr("y", function (d) {
      d.y = height / 2;
      if (width < height) {
        d.y = Math.random() * height;
      }
      return d.y;
    })
    .attr("class", "textnode")

    .on("mouseover", showTooltip)
    .on("mouseout", hideTooltip)
    .call(
      d3
        .drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended)
    );

  textNodeSvg
    .append("circle")
    .attr("r", function (d) {
      sizeFactor = 1;
      //if (currentYear < 2016) sizeFactor = 0.7;
      return size(d.size) * sizeFactor;
    })
    .attr("fill", function (d) {
      return d.color;
    });

  textNodeSvg
    .append("text")
    .text(function (d) {
      return d.name;
    })
    .attr("text-anchor", "middle");

  function dragstarted(d) {
    if (!d3.event.active) simulation.alphaTarget(0.03).restart();
    d.fx = d.x;
    d.fy = d.y;
  }

  function dragged(d) {
    d.fx = d3.event.x;
    d.fy = d3.event.y;
  }

  function dragended(d) {
    if (!d3.event.active) simulation.alphaTarget(0.03);
    d.fx = null;
    d.fy = null;
  }

  function wrap(texat, width) {
    texat.each(function () {
      var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        word,
        line = [],
        lineNumber = 0,
        tspan = text
          .text(null)
          .attr("text-anchor", "middle")
          .append("tspan")
          .attr("text-anchor", "middle")
          .attr("x", 0);

      sizeFactor = 1;
      //if (currentYear < 2016) sizeFactor = 0.7;
      var diameter = size(text.data()[0].size) * sizeFactor * 2;
      text.attr("dy", 0);
      width = diameter - diameter * 0.24;
      height = diameter - diameter * 0.5;
      var oneLine = true;
      while ((word = words.pop())) {
        line.push(word);
        tspan.text(line.join(" "));
        if (tspan.node().getComputedTextLength() > width) {
          lineNumber++;
          oneLine = false;
          line.pop();
          tspan.text(line.join(" "));
          line = [word];
          tspan = text
            .append("tspan")
            .attr("dy", 15)
            .attr("x", 0)
            .attr("text-anchor", "middle")
            .text(word);
        }

        prevLength = tspan.node().getComputedTextLength();
        //See if it's still too long
        if (tspan.node().getComputedTextLength() > width) {
          //It's still too long, hide the whole thing
          text.style("display", "none");
        }
      }
      if (text.node().getBBox().height > height) {
        text.style("display", "none");
      }

      if (lineNumber > 1) {
        text.attr("dy", -0.5 + "em");
      }

      if (oneLine) {
        //Only one line. We must split it if its more than one word
        words = text.text().split(/\s+/);
        if (words.length > 1) {
          //Yep, more than one word. Split it
          tspan = text
            .text(null)
            .attr("text-anchor", "middle")
            .append("tspan")
            .attr("text-anchor", "middle")
            .attr("x", 0)
            .text(words.slice(0, words.length / 2).join(" "));
          text
            .append("tspan")
            .attr("text-anchor", "middle")
            .attr("x", 0)
            .attr("dy", 15)
            .text(words.slice(words.length / 2, words.length).join(" "));
        }
      }
    });
  }
  redraw(2004);
};
